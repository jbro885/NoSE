<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: NoSE::Serialize::QueryPlanBuilder
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "NoSE::Serialize::QueryPlanBuilder";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (Q)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../NoSE.html" title="NoSE (module)">NoSE</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Serialize.html" title="NoSE::Serialize (module)">Serialize</a></span></span>
     &raquo; 
    <span class="title">QueryPlanBuilder</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: NoSE::Serialize::QueryPlanBuilder
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">NoSE::Serialize::QueryPlanBuilder</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Uber::Callable</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/nose/serialize.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Reconstruct the steps of a query plan</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#add_index_lookup_filters-instance_method" title="#add_index_lookup_filters (instance method)">#<strong>add_index_lookup_filters</strong>(step, step_hash, f)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add filters to a constructed index lookup step.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#add_plan_steps-instance_method" title="#add_plan_steps (instance method)">#<strong>add_plan_steps</strong>(plan, workload, steps_fragment, indexes, state)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loop over all steps in the plan and reconstruct them.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#build_filter_step-instance_method" title="#build_filter_step (instance method)">#<strong>build_filter_step</strong>(step_hash, _state, parent, _indexes, f)  &#x21d2; Plans::FilterPlanStep </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild a filter step.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#build_index_lookup_step-instance_method" title="#build_index_lookup_step (instance method)">#<strong>build_index_lookup_step</strong>(step_hash, state, parent, indexes, f)  &#x21d2; Plans::IndexLookupPlanStep </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild an index lookup step.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#build_limit_step-instance_method" title="#build_limit_step (instance method)">#<strong>build_limit_step</strong>(step_hash, _state, parent, _indexes, _f)  &#x21d2; Plans::LimitPlanStep </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild a limit step.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#build_plan-instance_method" title="#build_plan (instance method)">#<strong>build_plan</strong>(query, cost_model, fragment)  &#x21d2; Plans::QueryPlan </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Build a new query plan.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#build_sort_step-instance_method" title="#build_sort_step (instance method)">#<strong>build_sort_step</strong>(step_hash, _state, parent, _indexes, f)  &#x21d2; Plans::SortPlanStep </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild a sort step.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#build_step-instance_method" title="#build_step (instance method)">#<strong>build_step</strong>(step_hash, state, parent, indexes, f)  &#x21d2; Plans::PlanStep </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild a step from a hash using the given set of indexes The final parameter is a function which maps field names to instances.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#rebuild_step_state-instance_method" title="#rebuild_step_state (instance method)">#<strong>rebuild_step_state</strong>(step, step_hash)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild the state of the step from the provided hash.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_index_lookup_filters-instance_method">
  
    #<strong>add_index_lookup_filters</strong>(step, step_hash, f)  &#x21d2; <tt>void</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Add filters to a constructed index lookup step</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655
656
657
658
659
660</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_index_lookup_filters'>add_index_lookup_filters</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_eq_filter'>eq_filter</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eq_filter</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@eq_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_eq_filter'>eq_filter</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_range_filter'>range_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>range_filter</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_range_filter'>range_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_range_filter'>range_filter</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_range_filter'>range_filter</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@range_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_range_filter'>range_filter</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_plan_steps-instance_method">
  
    #<strong>add_plan_steps</strong>(plan, workload, steps_fragment, indexes, state)  &#x21d2; <tt>void</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Loop over all steps in the plan and reconstruct them</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


592
593
594
595
596
597
598
599
600
601
602</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 592</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_plan_steps'>add_plan_steps</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='comma'>,</span> <span class='id identifier rubyid_workload'>workload</span><span class='comma'>,</span> <span class='id identifier rubyid_steps_fragment'>steps_fragment</span><span class='comma'>,</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Plans.html" title="NoSE::Plans (module)">Plans</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Plans/RootPlanStep.html" title="NoSE::Plans::RootPlanStep (class)">RootPlanStep</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Plans/RootPlanStep.html#initialize-instance_method" title="NoSE::Plans::RootPlanStep#initialize (method)">new</a></span></span> <span class='id identifier rubyid_state'>state</span>
  <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_workload'>workload</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='lbracket'>[</span><span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parent</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_steps_fragment'>steps_fragment</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='op'>|</span>
    <span class='id identifier rubyid_step'>step</span> <span class='op'>=</span> <span class='id identifier rubyid_build_step'>build_step</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span>
    <span class='id identifier rubyid_rebuild_step_state'>rebuild_step_state</span> <span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_step_hash'>step_hash</span>
    <span class='id identifier rubyid_plan'>plan</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_step'>step</span>
    <span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='id identifier rubyid_step'>step</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_filter_step-instance_method">
  
    #<strong>build_filter_step</strong>(step_hash, _state, parent, _indexes, f)  &#x21d2; <tt><span class='object_link'><a href="../Plans/FilterPlanStep.html" title="NoSE::Plans::FilterPlanStep (class)">Plans::FilterPlanStep</a></span></tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rebuild a filter step</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Plans/FilterPlanStep.html" title="NoSE::Plans::FilterPlanStep (class)">Plans::FilterPlanStep</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


628
629
630
631
632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 628</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_filter_step'>build_filter_step</span><span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid__state'>_state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid__indexes'>_indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_eq'>eq</span> <span class='op'>=</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eq</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_range'>range</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>range</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>range</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="../Plans.html" title="NoSE::Plans (module)">Plans</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Plans/FilterPlanStep.html" title="NoSE::Plans::FilterPlanStep (class)">FilterPlanStep</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Plans/FilterPlanStep.html#initialize-instance_method" title="NoSE::Plans::FilterPlanStep#initialize (method)">new</a></span></span> <span class='id identifier rubyid_eq'>eq</span><span class='comma'>,</span> <span class='id identifier rubyid_range'>range</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_index_lookup_step-instance_method">
  
    #<strong>build_index_lookup_step</strong>(step_hash, state, parent, indexes, f)  &#x21d2; <tt><span class='object_link'><a href="../Plans/IndexLookupPlanStep.html" title="NoSE::Plans::IndexLookupPlanStep (class)">Plans::IndexLookupPlanStep</a></span></tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rebuild an index lookup step</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Plans/IndexLookupPlanStep.html" title="NoSE::Plans::IndexLookupPlanStep (class)">Plans::IndexLookupPlanStep</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


636
637
638
639
640
641
642
643
644
645
646
647
648
649</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 636</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_index_lookup_step'>build_index_lookup_step</span><span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_index_key'>index_key</span> <span class='op'>=</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_step_index'>step_index</span> <span class='op'>=</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='id identifier rubyid_index_key'>index_key</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_step'>step</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Plans.html" title="NoSE::Plans (module)">Plans</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Plans/IndexLookupPlanStep.html" title="NoSE::Plans::IndexLookupPlanStep (class)">IndexLookupPlanStep</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Plans/IndexLookupPlanStep.html#initialize-instance_method" title="NoSE::Plans::IndexLookupPlanStep#initialize (method)">new</a></span></span> <span class='id identifier rubyid_step_index'>step_index</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='id identifier rubyid_add_index_lookup_filters'>add_index_lookup_filters</span> <span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span>

  <span class='id identifier rubyid_order_by'>order_by</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_by</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@order_by</span><span class='comma'>,</span> <span class='id identifier rubyid_order_by'>order_by</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>limit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@limit</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_limit'>limit</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_step'>step</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_limit_step-instance_method">
  
    #<strong>build_limit_step</strong>(step_hash, _state, parent, _indexes, _f)  &#x21d2; <tt><span class='object_link'><a href="../Plans/LimitPlanStep.html" title="NoSE::Plans::LimitPlanStep (class)">Plans::LimitPlanStep</a></span></tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rebuild a limit step</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Plans/LimitPlanStep.html" title="NoSE::Plans::LimitPlanStep (class)">Plans::LimitPlanStep</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


614
615
616
617</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 614</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_limit_step'>build_limit_step</span><span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid__state'>_state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid__indexes'>_indexes</span><span class='comma'>,</span> <span class='id identifier rubyid__f'>_f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>limit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='const'><span class='object_link'><a href="../Plans.html" title="NoSE::Plans (module)">Plans</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Plans/LimitPlanStep.html" title="NoSE::Plans::LimitPlanStep (class)">LimitPlanStep</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Plans/LimitPlanStep.html#initialize-instance_method" title="NoSE::Plans::LimitPlanStep#initialize (method)">new</a></span></span> <span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_plan-instance_method">
  
    #<strong>build_plan</strong>(query, cost_model, fragment)  &#x21d2; <tt><span class='object_link'><a href="../Plans/QueryPlan.html" title="NoSE::Plans::QueryPlan (class)">Plans::QueryPlan</a></span></tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Build a new query plan</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Plans/QueryPlan.html" title="NoSE::Plans::QueryPlan (class)">Plans::QueryPlan</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


580
581
582
583
584
585
586
587
588</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 580</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_plan'>build_plan</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_cost_model'>cost_model</span><span class='comma'>,</span> <span class='id identifier rubyid_fragment'>fragment</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_plan'>plan</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Plans.html" title="NoSE::Plans (module)">Plans</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Plans/QueryPlan.html" title="NoSE::Plans::QueryPlan (class)">QueryPlan</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Plans/QueryPlan.html#initialize-instance_method" title="NoSE::Plans::QueryPlan#initialize (method)">new</a></span></span> <span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_cost_model'>cost_model</span>

  <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@name</span><span class='comma'>,</span> <span class='id identifier rubyid_fragment'>fragment</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> \
    <span class='kw'>unless</span> <span class='id identifier rubyid_fragment'>fragment</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@weight</span><span class='comma'>,</span> <span class='id identifier rubyid_fragment'>fragment</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>weight</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_plan'>plan</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_sort_step-instance_method">
  
    #<strong>build_sort_step</strong>(step_hash, _state, parent, _indexes, f)  &#x21d2; <tt><span class='object_link'><a href="../Plans/SortPlanStep.html" title="NoSE::Plans::SortPlanStep (class)">Plans::SortPlanStep</a></span></tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rebuild a sort step</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Plans/SortPlanStep.html" title="NoSE::Plans::SortPlanStep (class)">Plans::SortPlanStep</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


621
622
623
624</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 621</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_sort_step'>build_sort_step</span><span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid__state'>_state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid__indexes'>_indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sort_fields'>sort_fields</span> <span class='op'>=</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sort_fields</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../Plans.html" title="NoSE::Plans (module)">Plans</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Plans/SortPlanStep.html" title="NoSE::Plans::SortPlanStep (class)">SortPlanStep</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Plans/SortPlanStep.html#initialize-instance_method" title="NoSE::Plans::SortPlanStep#initialize (method)">new</a></span></span> <span class='id identifier rubyid_sort_fields'>sort_fields</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_step-instance_method">
  
    #<strong>build_step</strong>(step_hash, state, parent, indexes, f)  &#x21d2; <tt><span class='object_link'><a href="../Plans/PlanStep.html" title="NoSE::Plans::PlanStep (class)">Plans::PlanStep</a></span></tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rebuild a step from a hash using the given set of indexes The final parameter is a function which maps field names to instances</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Plans/PlanStep.html" title="NoSE::Plans::PlanStep (class)">Plans::PlanStep</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


607
608
609
610</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 607</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_step'>build_step</span><span class='lparen'>(</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_send'>send</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>build_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>_step</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span>
       <span class='id identifier rubyid_step_hash'>step_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_indexes'>indexes</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rebuild_step_state-instance_method">
  
    #<strong>rebuild_step_state</strong>(step, step_hash)  &#x21d2; <tt>void</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Rebuild the state of the step from the provided hash</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


664
665
666
667
668
669
670
671
672
673</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nose/serialize.rb', line 664</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rebuild_step_state'>rebuild_step_state</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># Copy the correct cardinality
</span>  <span class='comment'># XXX This may not preserve all the necessary state
</span>  <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@cardinality</span><span class='comma'>,</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cardinality</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@cost</span><span class='comma'>,</span> <span class='id identifier rubyid_step_hash'>step_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cost</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Jul 16 13:27:00 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.7.0).
</div>

    </div>
  </body>
</html>